{% extends "PHPMBundle:GroupeTache:layout.html.twig"  %}
{% set pageTitle = 'Edition du Groupe de Tâches' %}
{% use "PHPMBundle::edit.html.twig" %}

{% block content %}
<form class="form-horizontal" action="{{ path('groupetache_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(form) }}>
	<fieldset>
	<div class="row-fluid">       
		<div class="span6">
			<legend>Informations Générales</legend>
			{{ form_rest(form) }}
	    </div>
	    <div class="span6">
			<legend>Liste des Tâches du groupe</legend>
		    {% if taches is defined and taches|length > 0 %}
				<table class="table">
				    <thead>
				        <tr>
				            <th>Nom</th>
				            <th>Responsable</th>
				        </tr>
				    </thead>
				    <tbody>
				    {% for entity in taches %}
				        <tr>
				            <td>{{ entitiesMacro.tache(entity) }}</td>
				            <td>{{ entity.responsable }}</td>
				        </tr>
				    {% endfor %}
				    </tbody>
				</table>
			{% else %}
				<div class="span6 well">Ce groupe ne contient aucune tâche !</div>
			{% endif %}
			</div>
	</div>	
	<div class="row-fluid">
		<div class="form-actions">
		    <button class="btn btn-primary" type="submit"  name="action" value="save">Enregistrer</button>
		    <button class="btn" type="submit" name="action" value="add_tache"><i class="icon-file"></i> Ajouter une nouvelle tâche</button>
			{% if entity.statut == 0 and entity.isDeletable %}
				<button class="btn btn-danger" type="submit" name="action" value="delete"><i class="icon-trash"></i> Supprimer le groupe</button>
			{% endif %}
			{% if entity.statut == -1 %}
				<button class="btn btn-inverse" type="submit" name="action" value="restore"><i class="icon-repeat"></i> Restaurer le groupe</button>
			{% endif %}
		</div>
	</div>
	</fieldset>
</form>
{% endblock %}

