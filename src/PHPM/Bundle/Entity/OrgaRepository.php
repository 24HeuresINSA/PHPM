<?php

namespace PHPM\Bundle\Entity;

use Doctrine\ORM\EntityRepository;
use PHPM\Bundle\Entity\Orga;
/**
 * OrgaRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class OrgaRepository extends EntityRepository
{
	public function getOrgasWithCriteria($permis)
	{
	
		$qb = $this->getEntityManager()->createQueryBuilder()->select('o')->from('PHPMBundle:Orga','o');
		
		$query = $qb->getQuery();
		
		//exit(var_dump($qb->getQuery()->getResult()));
		

		
		if(isset($permis))
		{
			$qb->where($qb->expr()->eq('o.permis',$permis));
		}
		if(isset($age))
		{
			$qb->where($qb->expr()->eq('o.age',$age));
		}
		if(isset($id_tache))
		{
			$qb->where($qb->expr()->eq('o.id_tache',$id_tache));
		}
		if(isset($id_plage))
		{
			$qb->where($qb->expr()->eq('o.id_plage',$id_plage));
		}
		if(isset($niveau_confiance))
		{
			$qb->where($qb->expr()->eq('o.niveau_confiance',$niveau_confiance));
		}
		
		return $qb->getQuery()->getResult();
		
		
	}
	
}