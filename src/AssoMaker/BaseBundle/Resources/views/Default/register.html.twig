{% extends "AssoMakerBaseBundle::layout.html.twig"  %}

{% block content %}
<script>
    function unloadMess() {
        mess = "Attention, tes changements n'ont pas été enregistrés";
        return mess;
    }
    function setBunload(on) {
        window.onbeforeunload = (on) ? unloadMess : null;
    }
    setBunload(true);
</script>

<div class="row">
    <div class="span12">
        <h3>Inscription</h3>
        <div>
            {% for flashMessage in app.session.flashbag.get('notice') %}
            <div class="alert alert-error">
                {{ flashMessage }}
            </div>
            {% endfor %}
            <p>Pour vous enregistrer, sélectionnez l'une des méthodes ci-dessous :</p>
        </div>
    </div>
</div>
<div class="row">
    <div class="span6">
        {{ form_errors(form) }}
        <fieldset>
            <legend>1 - Via Google</legend>

            {% for owner in hwi_oauth_resource_owners() %}
                <a href="{{ hwi_oauth_login_url(owner) }}">{{ owner | trans({}, 'HWIOAuthBundle') }}</a> <br />
            {% endfor %}
        </fieldset>
    </div>
    <div class="span6">
        <form class="form-horizontal" onsubmit="javascript:setBunload(false);" action="{{ path('register') }}" method="post" {{ form_enctype(form) }}>
            <fieldset>
                <legend>2 - Manuellement</legend>

                {{ form_row(form.prenom) }}
                {{ form_row(form.nom) }}
                {{ form_row(form.email,{"help":"Adresse mail INSA de préférence."}) }}
                {{ form_row(form.plainPassword.first) }}
                {{ form_row(form.plainPassword.second) }}
            </fieldset>


            <div class="form-fluid">
                <div class="form-actions">
                    <button class="btn btn-success" type="submit">Continuer »</button>
                </div>
            </div>

            {{ form_widget(form._token) }}
        </form>
    </div>
</div>

{% endblock %}

